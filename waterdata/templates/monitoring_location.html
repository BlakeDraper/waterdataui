{% extends 'base.html' %}

{% block page_script %}
    {% if json_ld %}
    <script type="application/ld+json">
        {{ json_ld }}
    </script>
    {% endif %}
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css" integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js" integrity="sha512-/Nsx9X4HebavoBvEBuyp3I7od5tA0UzAxs+j83KgC8PU0kgB4XiK4Lfe4y4cgBtaRJQEIFCW+oC506aPT2L1zw==" crossorigin=""></script>
    <script src="https://unpkg.com/esri-leaflet@2.1.2/dist/esri-leaflet.js"
    integrity="sha512-ouokQ1RIIoqPTZKwlapdxHO5VWFoAi8wE+SwhSX89Ifac0w3p+H2da4oqHvRsBTIpNLewzAZU7gRVDFXyXcfjA=="
    crossorigin=""></script>
{% endblock page_script %}

{% if station %}{% set page_title = station.station_nm %}{% endif %}

{% block content %}
    <div class="usa-width-one-whole">
        {% if status_code == 200 %}
            <h1>Station Name: {{ station.station_nm }}</h1>
            <ul>
                <li><a href="{{ config.NWIS_ENDPOINTS.INVENTORY }}/?site_no={{ station.site_no }}" target="_blank">Site inventory page</a></li>
                <li><a href="{{ config.NWIS_ENDPOINTS.UV }}/?cb_00060=on&format=gif_mult_parms&site_no={{ station.site_no }}&period=7" target="_blank">Interactive grapher</a></li>
                <li><a href="{{ config.NWIS_ENDPOINTS.UV }}/?format=img_default&site_no={{ station.site_no }}&period=7" target="_blank">Presentation Charts</a></li>
            </ul>

            <div class="wdfn-component" data-component="hydrograph" data-siteno="{{ station.site_no }}"></div>
            <div class="wdfn-component" data-component="map" data-latitude="{{ station.dec_lat_va }}" data-longitude="{{ station.dec_long_va }}" data-zoom=8></div>

            <table>
            <thead>
                <tr>
                    <th scope="col">Description</th>
                    <th scope="col">Station Data</th>
                </tr>
            </thead>
            <tbody>
                {% for key, value in location_with_values.items() %}
                <tr>
                    <th scope="row"> {{ STATION_FIELDS_D[key] }} </th>

                    <td> {{ value }} </td>
                </tr>
                {% endfor %}
            </tbody>
            </table>

        {% else %}
            <h1>Error: HTTP {{ status_code }} -- {{ reason }}</h1>
        {% endif %}
    </div>
{% endblock content %}
